var k=Object.defineProperty;var x=(i,t,n)=>t in i?k(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n;var h=(i,t,n)=>(x(i,typeof t!="symbol"?t+"":t,n),n);import{g as v}from"../app.5xT9pH0X.js";import{p as U}from"../app.5xT9pH0X.js";import"./framework.iMb5CNH5.js";import"./theme.QX58hFUp.js";const y=()=>{if(!CanvasRenderingContext2D||!n())return;const i=CanvasRenderingContext2D.prototype,t=i.drawImage;if(!t){console.error("This script requires a basic implementation of drawImage");return}i.drawImage=function(r,u,a){if(!(arguments.length===9))return t.apply(this,[...arguments]);const l=s(...arguments);if(!b(l))return t.apply(this,l)};function n(){const e=document.createElement("canvas").getContext("2d");e.fillRect(0,0,40,40),e.drawImage(e.canvas,-40,-40,80,80,50,50,20,20);const r=e.getImageData(50,50,30,30),u=new Uint32Array(r.data.buffer),a=(d,o)=>u[o*r.width+d],c=[[9,9],[20,9],[9,20],[20,20]],l=[[10,10],[19,10],[10,19],[19,19]];return c.some(([d,o])=>a(d,o)!==0)||l.some(([d,o])=>a(d,o)===0)}function s(e,r,u,a,c,l,d,o,m){const{width:I,height:M}=C(e);a<0&&(r+=a,a=Math.abs(a)),c<0&&(u+=c,c=Math.abs(c)),o<0&&(l+=o,o=Math.abs(o)),m<0&&(d+=m,m=Math.abs(m));const g=Math.max(r,0),p=Math.min(r+a,I),f=Math.max(u,0),A=Math.min(u+c,M),E=o/a,w=m/c;return[e,g,f,p-g,A-f,r<0?l-r*E:l,u<0?d-u*w:d,(p-g)*E,(A-f)*w]}function b(e){return[3,4,7,8].some(r=>!e[r])}function C(e){const r=u=>{const a=globalThis[u];return a&&e instanceof a};if(r("HTMLImageElement"))return{width:e.naturalWidth,height:e.naturalHeight};if(r("HTMLVideoElement"))return{width:e.videoWidth,height:e.videoHeight};if(r("SVGImageElement"))throw new TypeError("SVGImageElement isn't yet supported as source image.","UnsupportedError");if(r("HTMLCanvasElement")||r("ImageBitmap"))return e}};function S(i="gun-avatar"){document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementsByClassName(i);for(let n in t){const s=t[n];s.dataset.round!="false"&&(s.style.borderRadius="100%"),s.src=v({pub:s.dataset.pub,size:Number(s.dataset.size),dark:!!s.dataset.dark,draw:s.dataset.draw,reflect:s.dataset.reflect!="false"})}})}function H(i="gun-avatar"){let t=!1;if(t)return;class n extends HTMLElement{constructor(){super();h(this,"img");h(this,"pub");h(this,"size");h(this,"draw");h(this,"reflect");h(this,"dark");h(this,"round");this.attachShadow({mode:"open"}),this.img=document.createElement("img"),this.shadowRoot.append(this.img)}render(){this.pub=this.hasAttribute("pub")?this.getAttribute("pub"):"1234123455Ute2tFhdjDQgzR-1234lfSlZxgEZKuquI.2F-j1234434U1234Asj-5lxnECG5TDyuPD8gEiuI123",this.size=this.hasAttribute("size")?Number(this.getAttribute("size")):400,this.draw=this.hasAttribute("draw")?this.getAttribute("draw"):"circles",this.reflect=this.hasAttribute("reflect")?this.getAttribute("reflect")!="false":!0,this.round=!!(this.hasAttribute("round")||this.getAttribute("round")==""),this.round?this.img.style.borderRadius="100%":this.img.style.borderRadius="0%",this.dark=!!(this.hasAttribute("dark")||this.getAttribute("dark")==""),this.img.src=v({pub:this.pub,size:this.size,dark:this.dark,draw:this.draw,reflect:this.reflect})}connectedCallback(){this.render()}static get observedAttributes(){return["pub","round","size","dark","draw","reflect"]}attributeChangedCallback(){this.render()}}customElements.define(i,n),t=!0}y();export{v as gunAvatar,S as mountClass,H as mountElement,U as parsePub};
